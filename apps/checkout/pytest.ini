[pytest]
# Pytest configuration for checkout service

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options
addopts =
    # Show verbose output
    -v
    # Show summary of all test outcomes
    -ra
    # Show local variables in tracebacks
    --showlocals
    # Enable coverage reporting
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    # Coverage thresholds
    --cov-fail-under=60
    # Show durations of slowest tests
    --durations=10
    # Strict markers (fail on unknown markers)
    --strict-markers
    # Warnings
    -W default

# Markers for test categorization
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (may require external services)
    slow: Slow tests (> 1 second)
    chaos: Chaos engineering tests (probabilistic outcomes)

# Coverage options
[coverage:run]
source = .
omit =
    */tests/*
    */venv/*
    */virtualenv/*
    */.venv/*
    */site-packages/*
    */distutils/*

[coverage:report]
# Fail if coverage is below 60%
fail_under = 60
# Show missing lines in coverage report
show_missing = True
# Skip covered files
skip_covered = False
# Precision for coverage percentage
precision = 2

[coverage:html]
directory = htmlcov

[coverage:xml]
output = coverage.xml
